# 1、多态的概述及形式

## 1.1、什么是多态？

- 同类型的对象，执行同一个行为，会表现出不同的行为特征。

## 1.2、多态的常见形式

![](笔记图片资源包\snipaste20220124_101148.jpg)

## 1.3、多态中成员访问特点

- 方法调用：编译看左边，运行看右边。
- 变量调用：编译看左边，运行也看左边。
- 多态侧重行为多态，而不是变量多态。
- 调用方法时虽然对象是父类或接口类型，但实际调用的方法是子类或实现类重写的方法。
- 调用变量则父类或接口必须拥有该变量，子类或实现类并不需要，因为调用时输出的是父类或接口的变量，而非前者。

## 1.4、多态的前提

- 有继承/实现关系；有父类引用指向子类对象；有方法重写。

# 2、多态的优势

## 2.1、优势

- 在多态形式下，右边对象可以实现解耦合，便于扩展和维护。

![](笔记图片资源包\snipaste20220124_110754.jpg)

- 定义方法的时候，使用父类型作为参数，该方法就可以接收这父类的一切子类对象，体现出多态的扩展性与便利。

## 2.2、运行原理

​		![](笔记图片资源包\snipaste20220124_112741.jpg)

​		由上图，dog类将地址传给d，当go方法接收到d的数据时，会在下方通过父类进行访问（即使你定义的是子类对象，由于父类范围大于子类，所以依旧能调用，而且调用的是所有位于父类的子类）当方法执行到run时，自动调用子类的run方法（即使父类有run方法，但由于调用方法的就近原则，子类的run方法覆盖了父类的run方法，如果一定要调用父类的方法的话，需要在子类通过super关键字间接调用或者通过强制转，将其换成子类再调用）将a传至dog类中执行run方法，最后在传回go方法继续执行。（对象回调）

## 2.3、多态下会产生的一个问题

- 多态下不能使用子类的独有功能
- 因为即使是多态形式，父类也无法访问子类独有的功能

## 2.4、多态下引用数据类型的类型转换

### 自动类型转换（从子到父)

- 子类对象赋值给父类类型的变量指向。

### 强制类型转换吗（从父到子)

-  此时必须进行强制类型转换：子类 对象变量 = (子类)父类类型的变量
-  作用：可以解决多态下的劣势，可以实现调用子类独有的功能。
-  注意： 如果转型后的类型和对象真实类型不是同一种类型，那么在转换的时候就会出现ClassCastException

![](笔记图片资源包\snipaste20220124_115207.jpg)

**Java建议强转转换前使用instanceof判断当前对象的真实类型，再进行强制转换**

![](笔记图片资源包\snipaste20220124_115221.jpg)

### 思考

#### 引用数据类型的类型转换，有几种方式？

-  自动类型转换、强制类型转换。

#### 强制类型转换能解决什么问题？强制类型转换需要注意什么。

-  可以转换成真正的子类类型，从而调用子类独有功能。
-  有继承关系/实现的2个类型就可以进行强制转换，编译无问题。
-  运行时，如果发现强制转换后的类型不是对象真实类型则报错。
-  类型转换异常：ClassCastException
