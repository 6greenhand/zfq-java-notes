# 1、静态关键字static



## 1.1、static关键字的作用

- static是静态的意思，可以修饰成员变量和成员方法。
- static修饰成员变量表示该成员变量只在内存中只存储一份，可以被共享访问、修改。

## 1.2、成员变量的分类

### 成员变量可以分为2类

-  静态成员变量（有static修饰，属于类，内存中加载一次）: 常表示如在线人数信息、等需要被共享的信息，可以被共享访问。 

    		  ![](笔记图片资源包\snipaste20220121_091456.jpg)

![](笔记图片资源包\snipaste20220121_091526.jpg)

-  实例成员变量（无static修饰，存在于每个对象中）：常表示姓名name、年龄age、等属于每个对象的信息。

![](笔记图片资源包\snipaste20220121_091535.jpg)

![](笔记图片资源包\snipaste20220121_091544.jpg)

#### 实例

```java
package com.gewuyou.staticd1;

public class User {
    //在线人数信息 静态成员变量
    public static int onLineNumber=162;
    //实例成员变量
    private String name;
    private int age;

    public static void main(String[] args) {
        //类名访问静态程序变量
        User.onLineNumber++;
        //注意，在同一个类名中访问静态成员变量时，类名可以省略不写
        System.out.println(onLineNumber);

        //对象，实例成员变量
        User u1=new User();
        u1.name="猪八戒";
        u1.age=36;
        System.out.println(u1.name);
        System.out.println(u1.age);
        //对象：静态成员变量(不推荐这样访问)

        User u2=new User();
        u2.name="孙悟空";
        u2.age=38;
        System.out.println(u2.name);
        System.out.println(u2.age);
        //对象：静态成员变量(不推荐这样访问)
        u2.onLineNumber++;
        System.out.println(User.onLineNumber);
    }
}

```

#### 思考

##### 成员变量的分类和访问分别是什么样的？

- 静态成员变量（有static修饰，属于类、加载一次，可以被共享访问）。

访问格式![](笔记图片资源包\snipaste20220121_101156.jpg)

- 实例成员变量（无static修饰，属于对象）。

访问格式![](笔记图片资源包\snipaste20220121_101259.jpg)
        

##### 两种成员变量各自在什么情况下定义？

- 静态成员变量：表示在线人数等需要被共享的信息。
- 实例成员变量：属于每个对象，且每个对象信息不同时（name,age,…等）

## 1.3、static修饰成员方法的基本用法

### 成员方法的分类

- 静态成员方法（有static修饰，属于类），建议用类名访问，也可以用对象访问。
- 实例成员方法（无static修饰，属于对象），只能用对象触发访问。

### 使用场景

- 表示对象自己的行为的，且方法中需要访问实例成员的，则该方法必须申明成实例方法。
- 如果该方法是以执行一个共用功能为目的，则可以申明成静态方法。

#### 实例

```java
package com.gewuyou.staticd2;

public class Student {
    private String name;
    private int age;
/*
* 实例方法，无static修饰，属于对象，通常表示对象自己的行为，可以访问对象的成员变量
* */
    public void study(){
        System.out.println(name+"在好好学习，天天向上~~");
    }
    /*
    静态方法；有static修饰，属于类，可以被类和对象共享访问
     */
    public static void getMax(int a,int b){
        System.out.println(a>b?a:b);
    }
    public static void main(String[] args) {
        //类名.静态方法
        Student.getMax(5,6);
        //注意：在同一个类中访问静态成员，可以省略类名
        getMax(10,100);
        //对象.实例方法
        Student student=new Student();
        student.name="全蛋";
        student.age=12;
        student.study();

        //不推荐的静态方法访问方式： 对象.静态方法
        student.getMax(13,234);
    }
}

```

#### 思考

##### 成员方法的分类和访问分别是什么样的？

-  静态成员方法（有static修饰，属于类和对象共享）访问格式：
  - 类名.静态成员方法。
  - 对象.静态成员方法。（不推荐）
- 实例成员方法（无static修饰，属于对象）的访问格式：
  - 对象.实例成员方法。

##### 每种成员方法的使用场景是怎么样的？

-  表示对象自己的行为的，且方法中需要访问实例成员的，则该方法必须申明成实例方法。
-  如果该方法是以执行一个通用功能为目的，或者需要方便访问，则可以申明成静态方法

## 1.4、static 定义工具类

### 工具类

- 工具类中定义的都是一些静态方法，每个方法都是以完成一个共用的功能为目的。

##### 工具类的好处

- 内部都是一些静态方法，每个方法完成一个功能
- 一次编写，处处可用，提高代码的重用性。

### 思考

##### 为什么工具类中的方法不用实例方法做？ 

- 实例方法需要创建对象调用，此时用对象只是为了调用方法，这样只会浪费内存

##### 工具类有什么要求？

- 建议工具类的构造器私有化处理。
- 工具类不需要创建对象。

### 工具类的定义注意

- 建议将工具类的构造器进行私有，工具类无需创建对象。
- 里面都是静态方法，直接用类名访问即可。

## 1.5、static访问注意事项

- 静态方法只能访问静态的成员，不可以直接访问实例成员。
- 实例方法可以访问静态的成员，也可以访问实例成员。
- 静态方法中是不可以出现this关键字的。 
  - 原因是this代表的是当前对象，而静态方法既可以被对象调用也可以被类调用，类包含多个对象， 而this只能指向一个对象，this无法一个指向多个对象！！！！

### 实例

```java
package com.gewuyou.staticd4;

public class Test {
    //静态成员变量
    public static int onLineNumber;
    public String name;
    //静态方法可以直接访问静态成员
    public static void getMax(){
        System.out.println(onLineNumber);
        System.out.println(Test.onLineNumber);
        inAddr();

        //静态方法中能否出现this关键字？ 不能,this代表的是当前对象，而静态方法既可以被对象调用也可以被类调用，类包含多个对象，
        // 而this只能指向一个对象
        //System.out.println(this); Test.this' cannot be referenced from a static context
    }

    public void run(){
        //实例方法可以直接访问静态成员
        System.out.println(onLineNumber);
        inAddr();
        //实例方法可以访问实例成员
        System.out.println(name);
        //实例方法可以访问实例方法
        sing();
        //实例方法可以访问静态方法
        getMax();
    }
    public void sing(){
        System.out.println("");
    }
    public static void inAddr(){
        System.out.println("我们在黑马程序员~~");
    }
    public static void main(String[] args) {

    }
}

```

# 2、static应用知识：代码块

## 2.1、代码块的分类与作用

### 代码块概述

- 代码块是类的5大成分之一（成员变量、构造器，方法，代码块，内部类），定义在类中方法外。
- 在Java类下，使用 { } 括起来的代码被称为代码块 。

### 代码块的类别

#### 静态代码块

- 格式：static{}
- 特点：需要通过static关键字修饰，随着类的加载而加载，并且自动触发、只执行一次（类似C语言中的宏定义）
- 使用场景：在类加载的时候做一些静态数据初始化的操作，以便后续使用。

##### 实例

```java
package com.gewuyou.staticd5_codeblock;

public class TestDemo1 {
    public static String schoolName;
    static {
        schoolName="黑马程序员";
        System.out.println("静态代码块被触发！！！！");
    }
    public static void main(String[] args) {
        //静态代码块特点，基本作用
        //作用：可以在程序加载时进行静态数据的初始化操作(准备内容)
        System.out.println("main方法被触发！！！");
        System.out.println(schoolName);
    }
}

```

##### 思考

###### 静态代码块的作用是什么?

- 如果要在启动系统时对数据进行初始化。
- 建议使用静态代码块完成数据的初始化操作，代码优雅。

####  构造代码块（了解）

- 格式：{}
- 特点：每次创建对象，调用构造器执行时，都会执行该代码块中的代码，并且在构造器执行前执行
- 使用场景：初始化实例资源。



# 3、static应用知识：单例设计模式

## 3.1、设计模式

- 开发中经常遇到一些问题，一个问题通常有n种解法的，但其中肯定有一种解法是最优的，这个最优的解法被人总结出来了，称之为设计模式。
- 设计模式有20多种，对应20多种软件开发中会遇到的问题，学设计模式主要是学2点：
  - 第一：这种模式用来解决什么问题。
  - 第二：遇到这种问题了，该模式是怎么写的，他是如何解决这个问题的。

## 3.2、单例模式

- 可以保证系统中，应用该模式的这个类永远只有一个实例，即一个类永远只能创建一个对象。
- 例如任务管理器对象我们只需要一个就可以解决问题了，这样可以节省内存空间。

## 3.3、饿汉单例模式

在用类获取对象的时候，对象已经提前为你创建好了。

### 设计步骤

- 定义一个类，把构造器私有。
- 定义一个静态变量存储一个对象

![](笔记图片资源包\snipaste20220121_174217.jpg)

## 3.4、懒汉单例模式

在真正需要该对象的时候，才去创建一个对象(延迟加载对象)。

### 设计步骤

- 定义一个类，把构造器私有。
- 定义一个静态变量存储一个对象。
- 提供一个返回单例对象的方法
- 建议把静态变量私有化

![](笔记图片资源包\snipaste20220121_190440.jpg)